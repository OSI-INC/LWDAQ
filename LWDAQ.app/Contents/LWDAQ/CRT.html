<html><head><title>LWDAQ Command Reference</title><link 	rel="Stylesheet" 	href="https://www.opensourceinstruments.com/HTML/manual.css" 	type="text/css"></head><body><center><h1><a href="http://www.bndhep.net"><img src="http://www.bndhep.net/HTML/LWDAQ.png" height="30"></a>LWDAQ Command Reference<a href="https://www.opensourceinstruments.com"><img src="https://www.opensourceinstruments.com/HTML/OSI_Logo.gif" height="30"></a></h1><small>For LWDAQ Version LWDAQ_Version_Here<br>&copy; 2004&minus;2020 Kevan Hashemi, Brandeis University<br>&copy; 2006&minus;2025 Kevan Hashemi, <a href="https://www.opensourceinstruments.com/">Open Source Instruments Inc.</a><br></small></center><h2>Contents</h2><h2>Introduction</h2><p>When it starts up, LWDAQ installs hundreds of commands for instruments and tools to use. The <i>LWDAQ</i> (upper-case LWDAQ) commands are those installed by <a href="https://www.tcl-lang.org/software/tcltk/">TclTk</a> scripts that LWDAQ runs at start-up. The <i>lwdaq</i> (lower-case lwdaq) commands are those installed by the lwdaq library that LWDAQ loads at start-up. We compile this library from Pascal source code. The LWDAQ commands all begin with <i>LWDAQ_</i>. The lwdaq commands all begin with <i>lwdaq_</i>. The LWDAQ program also contains a number of optional TclTk libraries that reside in its Packages directory. These we can load into LWDAQ with "package require" commands. This Command Reference describes all LWDAQ and lwdaq commands.</p><p>The Tcl scripts that define the LWDAQ commands are in the LWDAQ/LWDAQ.app/Contents/LWDAQ directory. Each LWDAQ command has its own entry in this manual, with its Tcl declaration and its in the Tcl comments above the declaration. The Pascal units that define the lwdaq commands are in the LWDAQ/Sources directory. Each operating system has its own version of the shared library we compile from the Pascal units, but all versions define the same commands. Each lwdaq command takes some mandatory parameters, and a list of optional parameters. You specify the mandatory parameters by passing their values directly to the command, in the correct order. You specify optional parameters with a list of option names in the form "?option value?". You can specify any number of these options, and in any order. Here is an example library command call from the Rasnik instrument script.</p><small><pre>set result [lwdaq_rasnik $image_name \	-show_fitting $config(analysis_show_fitting) \	-show_timing $config(analysis_show_timing) \	-reference_code $config(analysis_reference_code) \	-orientation_code $config(analysis_orientation_code) \	-pixel_size_um $info(analysis_pixel_size_um) \	-reference_x_um $info(analysis_reference_x_um) \	-reference_y_um $info(analysis_reference_y_um) \	-square_size_um $config(analysis_square_size_um) ]</pre></small><p>The lwdaq.pas file acts as an interface between our Pascal library and the Tcl interpreter that manages the entire LWDAQ process. The lwdaq.pas initialization routine, <i>init_Lwdaq</i>, loads the lwdaq shared library and declares all the lwdaq commands for the interpreter's use. We compile the shared libraries for Windows, Linux, MacOS, and Raspbian with the Free Pascal Compiler (<a href="https://www.freepascal.org">FPC</a>).</p><p>The <i>lwdaq</i> command grants access to a selection of mathematical routines declared in our Pascal library. We call these the lwdaq <i>routines</i> to distinguish them from the lwdaq <i>commands</i>, of which <i>lwdaq</i> is an exmaple. The following command calls our linear interpolator on a set of x-y data pairs to estimate the value of a curve at <i>x</i>=2.</p><pre><small>lwdaq linear_interpolate 2 "0 0 3 3 6 6"</small></pre><p>You will find a list of the routines available through the <i>lwdaq</i> command in a table <a href="#Library Routines">below</a>, as well as descriptions of each of them.</p><p>The <i>image</i> parameters taken by many of the library commands are the names of images in the LWDAQ image list. This list of images is maintained in memory by the library commands. Each image contains its pixel intensities and an overlay in which the library routines can draw lines. You draw an image in a Tk photo widget with lwdaq_draw. First lwdaq_draw renders the pixel intensity in the photo, and then it renders the overlay. The same image can be rendered in multiple Tk photos. When an instrument captures consecutive images from a data acquisition system, it is deleting previous images (now redundant) from the LWDAQ image list, creating a new image, filling it with the acquired pixel intensities, and rendering the image in the same Tk photo in the instrument window.</p>LWDAQ_Commandslwdaq_Commandslwdaq_Routines</body></html>